---
import Layout from "../layouts/Layout.astro";
import { products, categories } from "../data/products";
---

<Layout title="Fast Food - Delivery">
  <main class="min-h-screen bg-gradient-to-b from-zinc-950 via-zinc-900 to-zinc-950">
    <section class="container mx-auto px-4 py-8">

      <!-- HEADER -->
      <section
        class="fixed top-0 left-0 w-full z-50 bg-zinc-950/95 backdrop-blur border-b border-zinc-800 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 px-4 py-4"
      >
        <div class="flex items-center gap-3">
          <div class="h-12 w-12 rounded-full bg-amber-400 flex items-center justify-center text-zinc-950 text-xl font-black">
            GM
          </div>
          <div>
            <h1 class="text-2xl font-semibold text-zinc-50">Grill Master</h1>
            <p class="text-sm text-zinc-400">
              Hamburguesas, pizzas, lomitos y m√°s üçî
            </p>
          </div>
        </div>

        <button
          id="btn-open-cart"
          type="button"
          class="inline-flex items-center gap-2 rounded-full border border-amber-400 bg-zinc-900 px-4 py-2 text-sm font-medium text-amber-300 hover:bg-amber-400 hover:text-zinc-950 transition"
        >
          Carrito
          <span
            id="cart-count"
            class="bg-amber-500 text-zinc-950 rounded-full px-2 text-xs font-bold"
          >
            0
          </span>
        </button>
      </section>

      <!-- FILTROS -->
      <section
        id="filters"
        class="pt-[140px] flex flex-wrap gap-2 justify-center mb-6"
      >
        {categories.map((cat) => (
          <button
            type="button"
            data-filter={cat.id}
            data-active="false"
            class="
              filter-btn
              px-4 py-2 rounded-full border text-xs uppercase transition

              bg-zinc-900
              border-zinc-700
              text-white

              hover:bg-zinc-800

              data-[active=true]:bg-amber-400
              data-[active=true]:border-amber-400
              data-[active=true]:text-black
              data-[active=true]:font-semibold
              data-[active=true]:shadow
              data-[active=true]:shadow-amber-500/40
            "
          >
            {cat.name}
          </button>
        ))}
      </section>

      <!-- CONTADOR -->
      <p class="text-xs text-zinc-400 mb-4 text-center">
        Mostrando <span id="products-count">{products.length}</span> productos
      </p>

      <!-- PRODUCTOS -->
      <section
        id="products-grid"
        class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"
      >
        {products.map((product) => (
          <article
            class="product-card bg-zinc-900 border border-zinc-800 rounded-2xl overflow-hidden flex flex-col"
            data-id={product.id}
            data-category={product.category}
            data-price={product.price}
          >
            <img
              src={product.image}
              alt={product.name}
              class="h-56 w-full object-cover product-image"
            />

            <div class="p-4 flex flex-col flex-1">
              <div class="flex justify-between mb-2">
                <h3 class="product-name text-zinc-50 text-sm font-semibold">
                  {product.name}
                </h3>
                <span class="text-amber-400 font-bold text-sm">
                  ${product.price.toLocaleString("es-AR")}
                </span>
              </div>

              <p class="product-description text-xs text-zinc-400 mb-4">
                {product.description}
              </p>

              <div class="mt-auto flex gap-2">
                <button
                  type="button"
                  class="btn-customize flex-1 rounded-full border border-zinc-600 px-3 py-2 text-xs text-zinc-200 hover:bg-zinc-800"
                  data-product-id={product.id}
                >
                  Personalizar
                </button>

                <button
                  type="button"
                  class="btn-add flex-1 rounded-full bg-amber-400 px-3 py-2 text-xs font-semibold text-zinc-950 hover:bg-amber-300"
                  data-product-id={product.id}
                >
                  Agregar
                </button>
              </div>
            </div>
          </article>
        ))}
      </section>
    </section>

    <!-- MODAL PERSONALIZAR -->
    <div
      id="customize-modal"
      class="fixed inset-0 hidden items-center justify-center bg-black/80 z-50"
    >
      <div class="bg-zinc-900 border border-zinc-800 rounded-2xl max-w-md w-full max-h-[95vh] overflow-hidden shadow-2xl flex flex-col">
        <div class="flex items-center justify-between p-4 border-b border-zinc-800">
          <h2 class="text-lg font-semibold text-zinc-50">
            Personalizar producto
          </h2>
          <button id="btn-close-customize" class="text-zinc-400 hover:text-white">
            ‚úï
          </button>
        </div>

        <div class="p-4 overflow-y-auto flex-1">
          <textarea
            id="custom-notes"
            rows="3"
            class="w-full bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm text-zinc-200"
            placeholder="Notas especiales‚Ä¶"
          ></textarea>
        </div>

        <div class="p-4 border-t border-zinc-800">
          <button
            id="btn-add-customized"
            class="w-full rounded-full bg-amber-400 px-6 py-3 text-sm font-semibold text-zinc-950 hover:bg-amber-300"
          >
            Agregar al carrito
          </button>
        </div>
      </div>
    </div>

    <!-- MODAL CARRITO -->
    <div
      id="cart-modal"
      class="fixed inset-0 hidden items-center justify-center bg-black/80 z-50"
    >
      <div class="bg-zinc-900 p-6 rounded-xl w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-zinc-50 text-lg font-semibold">Tu pedido</h3>
          <button id="btn-close-cart" class="text-zinc-400 text-xl">‚úï</button>
        </div>

        <div id="cart-items" class="space-y-3 mb-4"></div>

        <div class="flex justify-between items-center mb-4">
          <span class="text-zinc-400">Total</span>
          <span
            id="cart-total"
            class="text-amber-400 text-xl font-bold"
          >
            $0
          </span>
        </div>

        <button
          id="btn-whatsapp"
          class="w-full bg-green-600 py-3 rounded-full text-white font-semibold"
        >
          Enviar por WhatsApp
        </button>
      </div>
    </div>

  </main>

  <!-- ENTRY POINT -->
  <script type="module" src="/js/main.js"></script>
</Layout>
